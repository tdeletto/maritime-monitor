# Maritime Monitor - API Key Setup Guide

## Overview

This guide provides step-by-step instructions for obtaining and configuring API keys for the three core maritime data sources.

---

## ðŸ“‹ Quick Reference

| Service | Purpose | Setup Time | Cost | Rate Limit (Free) |
|---------|---------|-----------|------|------------------|
| **AIS Hub** | Vessel Tracking | 5 min | Free | 100/hour |
| **OpenWeather** | Weather Data | 3 min | Free | 1M/month |
| **Maritime Awareness** | Security Data | 10+ min | Variable | Varies |

---

## 1ï¸âƒ£ AIS Hub API - Vessel Position Tracking

### What It Does
- Real-time Automatic Identification System (AIS) data
- Tracks vessel positions, headings, speeds worldwide
- Updates typically every 10-60 seconds
- Powers the "AIS Vessel Tracking" layer

### Provider
**Website**: https://www.aishub.net/

### Step-by-Step Setup

#### Step 1: Create Account
1. Visit [https://www.aishub.net/](https://www.aishub.net/)
2. Click **"Sign Up"** or **"Register"**
3. Fill in:
   - Email address
   - Password (strong, 12+ characters recommended)
   - Username
   - Agree to Terms of Service
4. Click **"Register"** button
5. Verify your email (check inbox and spam folder)

#### Step 2: Access API Dashboard
1. Log in to your AIS Hub account
2. Navigate to **Dashboard** â†’ **API**
3. You should see an API key listed (auto-generated)
   - If not visible, click **"Generate API Key"**

#### Step 3: Copy Your API Key
1. Find your API key (looks like: `abc123def456ghi789jkl`)
2. Click **"Copy"** button or highlight and copy
3. Keep this key secure - don't share it

#### Step 4: Configure in `.env.local`
```bash
# Create .env.local file (copy from .env.local.example)
cp .env.local.example .env.local

# Edit .env.local and replace:
VITE_AIS_HUB_API_KEY=your_actual_aishub_api_key_here
```

### API Documentation
- **Docs**: https://www.aishub.net/api
- **Getting Started**: https://www.aishub.net/api/getting-started
- **Reference**: https://www.aishub.net/api/reference

### Rate Limits & Plans

**Free Plan**:
- 100 API requests per hour
- Global AIS data access
- Historical data: Last 7 days
- Response format: JSON

**Professional Plans**:
- Higher rate limits (1000+/hour)
- Advanced filtering
- Historical data archives
- Priority support

### Troubleshooting

**Issue**: "Invalid API key" error
- âœ“ Verify key copied exactly (no spaces)
- âœ“ Check key hasn't expired (regenerate if needed)
- âœ“ Ensure .env.local is in project root
- âœ“ Restart dev server: `npm run dev`

**Issue**: Rate limit exceeded (429 error)
- âœ“ Increase `VITE_AIS_UPDATE_INTERVAL` in .env.local
- âœ“ Current: `60000` (60 seconds) - increase to `120000` or higher
- âœ“ Upgrade to professional plan if heavy usage needed

**Issue**: No vessel data appearing
- âœ“ Verify "AIS Vessel Tracking" layer is enabled in UI
- âœ“ Check browser console for errors: Press `F12`
- âœ“ Verify API key is correct: Check dashboard

---

## 2ï¸âƒ£ OpenWeather API - Maritime Weather Data

### What It Does
- Ocean and marine weather forecasts
- Wave heights, wind patterns, pressure systems
- 5-day forecasts (free tier) / 16-day (paid)
- Powers the "Weather Services" layer

### Provider
**Website**: https://openweathermap.org/api

### Step-by-Step Setup

#### Step 1: Create Account
1. Visit [https://openweathermap.org/](https://openweathermap.org/)
2. Click **"Sign Up"** in top right
3. Fill in registration form:
   - Email address
   - Password (strong, 12+ characters)
   - Full Name
   - Company (optional)
   - Agree to terms
4. Click **"Create Account"**
5. Verify email (check inbox)

#### Step 2: Find Your API Key
1. Log in to your account
2. Go to **Account** â†’ **My API keys**
3. You'll see a default API key (auto-generated)
   - Usually labeled "Default key"
   - Looks like: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`

#### Step 3: Copy Your API Key
1. Click on the key or **"Copy"** button
2. The key is now in your clipboard

#### Step 4: Configure in `.env.local`
```bash
# Edit .env.local and add:
VITE_OPENWEATHER_API_KEY=your_actual_openweather_key_here
```

### API Documentation
- **Main Docs**: https://openweathermap.org/api
- **Current Weather**: https://openweathermap.org/current
- **Marine Data**: https://openweathermap.org/api/marine-api
- **Weather Alerts**: https://openweathermap.org/api/alerts

### Free Plan Features

âœ“ Current weather data
âœ“ 5-day weather forecast
âœ“ 5-7 day historical weather
âœ“ Geocoding API (free)
âœ“ 60 calls per minute limit
âœ“ 1,000,000 calls per month
âœ“ HTTP or HTTPS access

### Professional Plans

**Weather Pro Tier**:
- 16-day forecasts
- Unlimited historical weather (50 years back)
- Advanced forecasts
- Higher rate limits
- Priority support

**Marine API** (requires subscription):
- Ocean wave forecasts
- Marine current data
- Swell predictions
- Comprehensive marine data

### Troubleshooting

**Issue**: "Invalid API key" error
- âœ“ Verify key is copied correctly
- âœ“ Wait 10 minutes after account creation (new key activation delay)
- âœ“ Check key hasn't been revoked: Go to API keys page

**Issue**: "Access restricted" or 401 error
- âœ“ Verify you're using the correct API key from "My API keys"
- âœ“ Check API access is enabled in account settings
- âœ“ Try regenerating the key (click refresh icon)

**Issue**: Rate limit exceeded (429 error)
- âœ“ Increase `VITE_WEATHER_UPDATE_INTERVAL` in .env.local
- âœ“ Current: `600000` (10 minutes) - increase if needed
- âœ“ Weather changes slowly, so longer intervals are fine

**Issue**: Marine data not available
- âœ“ Marine API is a separate service (subscription required)
- âœ“ Free tier includes standard weather only
- âœ“ For ocean waves: Upgrade to Weather Pro + Marine API

---

## 3ï¸âƒ£ Maritime Awareness Service - Security & Incident Data

### What It Does
- Security incident alerts and piracy reports
- Hazardous cargo information
- Maritime safety incidents
- Regional threat intelligence
- Powers the "Maritime Security" layer

### Provider Options

There are multiple options for maritime security data:

#### Option A: IMO GISIS (Recommended for Institutional Use)

**Website**: https://gisis.imo.org/

**Setup Process**:
1. Visit GISIS portal
2. Request institutional access (requires:
   - Organization details
   - Government authorization
   - Use case description)
3. Wait for approval (1-2 weeks)
4. Receive credentials

**Best For**: Government agencies, maritime organizations, research institutions

**Cost**: Free for eligible organizations

#### Option B: Marine Traffic API (Commercial)

**Website**: https://www.marinetraffic.com/en/services/api

**Setup Process**:
1. Visit https://www.marinetraffic.com/en/services/api
2. Click **"Sign Up"**
3. Create business account
4. Choose subscription plan
5. Receive API credentials

**Best For**: Commercial operations, shipping companies

**Cost**: $99/month - $999/month depending on tier

**Features**:
- Vessel tracking + security alerts
- Historical data
- Incident reporting
- Real-time alerts

#### Option C: Regional Piracy/Safety Centers

**Resources by Region**:
- **Indian Ocean**: Regional Piracy Reporting Center (RCC)
- **Strait of Malacca**: ReCAAP Information Sharing Centre (ISC)
- **Gulf of Guinea**: Piracy Reporting Centre
- **Mediterranean**: MSIS (Maritime Safety Information Service)

**Setup Process**:
1. Contact regional center
2. Request data feeds (often free/public)
3. Receive data via:
   - Email distribution lists
   - RSS feeds
   - REST API (if available)
   - Weekly reports

**Best For**: Research, NGOs, humanitarian organizations

**Cost**: Usually free for qualified organizations

#### Option D: Custom Data Integration (Advanced)

For this project, implement:
1. Your own data aggregation service
2. Feed from multiple public sources:
   - IMO Circular letters
   - Official government notices
   - Maritime authority bulletins
   - News feeds and scraping

### Recommended Starting Point

For development/testing, use **Option C (Regional Centers)**:

1. **ReCAAP ISC** (Southeast Asia): https://www.recaap.org/
   - Free public data
   - RSS feed available
   - Weekly incident reports

2. **IMO Circular Letters**: https://www.imo.org/
   - Free, public information
   - Security advisories
   - Maritime piracy updates

3. **News Aggregation**: Use existing news APIs
   - NewsAPI.org (free tier available)
   - Filter for "maritime security" keywords

### Configuration for Custom Integration

If using public/custom data sources:

```bash
# Edit .env.local:
VITE_MARITIME_AWARENESS_API_KEY=your_custom_key_or_placeholder
VITE_MARITIME_AWARENESS_API_URL=https://your-backend-api.com/maritime/

# Data types to monitor:
VITE_SECURITY_DATA_TYPES=piracy,hijacking,contraband,collision,environmental

# Alert threshold:
VITE_SECURITY_ALERT_THRESHOLD=medium
```

### Setting Up Custom Security Data Feed

#### Step 1: Choose Data Sources
```javascript
// Example sources for security data
const securityDataSources = [
  {
    name: 'ReCAAP ISC',
    url: 'https://www.recaap.org/rss',
    type: 'rss',
    region: 'SE Asia'
  },
  {
    name: 'IMO Circulars',
    url: 'https://www.imo.org/en/MediaCentre/Pages/default.aspx',
    type: 'web_scrape',
    region: 'Global'
  },
  {
    name: 'Regional PTCs',
    url: 'https://piratyreporting.eu/',
    type: 'web_scrape',
    region: 'European'
  }
];
```

#### Step 2: Implement Backend Aggregator

Create a backend service (Node.js example):

```javascript
// backend/services/security-aggregator.js
const axios = require('axios');
const Parser = require('rss-parser');

async function aggregateSecurityData() {
  const incidents = [];
  
  // Fetch ReCAAP RSS
  try {
    const parser = new Parser();
    const feed = await parser.parseURL('https://www.recaap.org/rss');
    incidents.push(...parseReCAAP(feed));
  } catch (err) {
    console.error('ReCAAP fetch error:', err);
  }
  
  return incidents;
}

function parseReCAAP(feed) {
  return feed.items.map(item => ({
    id: item.guid,
    title: item.title,
    description: item.content,
    source: 'recaap',
    date: new Date(item.pubDate),
    url: item.link,
    severity: extractSeverity(item.title)
  }));
}

module.exports = { aggregateSecurityData };
```

#### Step 3: Expose via Backend API

```javascript
// backend/routes/security.js
router.get('/security-incidents', async (req, res) => {
  const { startDate, endDate, region } = req.query;
  const incidents = await aggregateSecurityData();
  res.json(incidents);
});
```

#### Step 4: Connect Frontend

```typescript
// src/services/security-monitor.ts
export async function fetchSecurityIncidents(): Promise<SecurityIncident[]> {
  const response = await fetch(
    `${import.meta.env.VITE_MARITIME_AWARENESS_API_URL}security-incidents`,
    {
      headers: {
        'Authorization': `Bearer ${import.meta.env.VITE_MARITIME_AWARENESS_API_KEY}`
      }
    }
  );
  return response.json();
}
```

### Troubleshooting

**Issue**: "API key not configured"
- âœ“ Verify `.env.local` has `VITE_MARITIME_AWARENESS_API_KEY`
- âœ“ Restart dev server after editing .env.local
- âœ“ Use correct format for your chosen provider

**Issue**: No security data appearing
- âœ“ Verify data source is responding
- âœ“ Check backend API is running (if using custom integration)
- âœ“ Monitor browser console for errors
- âœ“ Verify geographical filters aren't too restrictive

**Issue**: Authentication failures
- âœ“ Double-check API key/credentials
- âœ“ Verify credentials haven't expired
- âœ“ Check for IP whitelist restrictions
- âœ“ Use backend proxy if CORS issues occur

---

## ðŸ”’ Security Best Practices

### API Key Management

1. **Never commit `.env.local`**
   ```bash
   # Already in .gitignore, but verify:
   cat .gitignore | grep "\.env"
   ```

2. **Rotate keys periodically**
   - Every 3 months recommended
   - Immediately if suspected compromise

3. **Use backend proxy for production**
   ```
   Browser â†’ Your Backend â†’ Maritime APIs
   
   This hides API keys from client-side code
   ```

4. **Monitor API usage**
   - Set up billing alerts
   - Monitor rate limit responses
   - Check for unusual patterns

5. **Restrict API key permissions**
   - Only enable required endpoints
   - Set IP whitelists if available
   - Use read-only access where possible

### Rate Limit Handling

```typescript
// Implement exponential backoff
async function fetchWithRetry(
  url: string,
  maxRetries: number = 3,
  baseDelay: number = 1000
): Promise<Response> {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const response = await fetch(url);
      
      if (response.status === 429) {
        const delay = baseDelay * Math.pow(2, i);
        console.warn(`Rate limited. Retrying in ${delay}ms...`);
        await new Promise(r => setTimeout(r, delay));
        continue;
      }
      
      return response;
    } catch (error) {
      if (i === maxRetries - 1) throw error;
    }
  }
  throw new Error('Max retries exceeded');
}
```

---

## ðŸ“Š Testing Configuration

After setting up API keys:

1. **Verify connection**
   ```bash
   npm run dev
   # Check browser console for connection status
   ```

2. **Monitor API calls**
   - Open DevTools: Press `F12`
   - Go to Network tab
   - Watch for API requests
   - Verify successful responses (200 status)

3. **Check data flow**
   - Console tab: Look for log messages
   - Check for errors or warnings
   - Verify data appears in UI layers

4. **Performance check**
   - Response times should be < 5 seconds
   - No repeated failed requests
   - Rate limits not exceeded

---

## ðŸ“ž Support & Resources

### API Provider Support

- **AIS Hub**: support@aishub.net
- **OpenWeather**: https://openweathermap.org/contact
- **ReCAAP**: https://www.recaap.org/contact
- **IMO**: https://www.imo.org/en/About/Contact/Pages/default.aspx

### Project Issues

- GitHub Issues: https://github.com/tdeletto/maritime-monitor/issues
- Documentation: See README.md and SETUP_GUIDE.md

---

## âœ… Checklist: API Configuration Complete

- [ ] Created `.env.local` from `.env.local.example`
- [ ] Obtained AIS Hub API key
- [ ] Configured `VITE_AIS_HUB_API_KEY`
- [ ] Obtained OpenWeather API key  
- [ ] Configured `VITE_OPENWEATHER_API_KEY`
- [ ] Chosen maritime security data source
- [ ] Configured `VITE_MARITIME_AWARENESS_API_KEY`
- [ ] Verified `.env.local` is in `.gitignore`
- [ ] Tested API connections (`npm run dev`)
- [ ] Confirmed data appears in UI
- [ ] Set up API usage monitoring
- [ ] Documented backup API keys securely

---

**Last Updated**: February 2026
